##
# Ansible playbook for setting up a development server.
#

---
- hosts: all

  tasks:
    ##
    # Apt package installation of required software.
    #
    - name: General | Install required packages.
      action: apt pkg={{ item }} state=installed
      tags: common
      with_items:
        - php5
        - apache2
        - mysql-server
        - mysql-client
        - php5-mysql
        - php-apc
        - php5-xmlrpc
        - php-soap
        - php5-gd
        - sendmail
        - unzip
        - python-mysqldb

    - name: Add Elasticsearch apt key.
      apt_key:
       url: http://packages.elasticsearch.org/GPG-KEY-elasticsearch
       state: present
       tags: [elasticsearch]

    - name: Add Elasticsearch repository.
      apt_repository:
       repo: 'deb http://packages.elasticsearch.org/elasticsearch/1.4/debian stable main'
       state: present
       update_cache: yes
       tags: [elasticsearch]
   
    - name: Install Elasticsearch.
      apt: pkg=elasticsearch state=present
      tags: [elasticsearch]

